{"ast":null,"code":"var _jsxFileName = \"D:\\\\raect_job_apply\\\\src\\\\components\\\\HomePage.js\";\nimport React, { useState, useEffect } from 'react';\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { initiateGetJobs } from '../actions/jobs';\nimport { resetErrors } from '../actions/errors';\nimport Header from './Header';\nimport Search from './Search';\nimport Results from './Results';\nimport JobDetails from './JobDetails';\nimport JobsContext from '../context/jobs';\nimport Loader from './Loader';\n\nconst HomePage = props => {\n  const [results, setResults] = useState([]);\n  const [errors, setErrors] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [jobId, setJobId] = useState(-1);\n  const [page, setPage] = useState('home');\n  const [pageNumber, setPageNumber] = useState(1);\n  const [selection, setSelection] = useState(null);\n  const [hideLoadMore, setHideLoadMore] = useState(false);\n  useEffect(() => {\n    setResults(props.jobs);\n  }, [props.jobs]);\n  useEffect(() => {\n    setErrors(props.errors);\n  }, [props.errors]);\n\n  const loadJobs = selection => {\n    const {\n      dispatch\n    } = props;\n    const {\n      description,\n      location,\n      full_time,\n      page = 1\n    } = selection;\n    let isLoadMore = false;\n\n    if (selection.hasOwnProperty('page')) {\n      isLoadMore = true;\n    }\n\n    dispatch(resetErrors());\n    setIsLoading(true);\n    dispatch(initiateGetJobs({\n      description,\n      location,\n      full_time,\n      page\n    }, isLoadMore)).then(response => {\n      if (response && response.jobs.length === 0) {\n        setHideLoadMore(true);\n      } else {\n        setHideLoadMore(false);\n      }\n\n      setIsLoading(false);\n    }).catch(() => setIsLoading(false));\n  };\n\n  const handleSearch = selection => {\n    loadJobs(selection);\n    setSelection(selection);\n  };\n\n  const handleItemClick = jobId => {\n    setPage('details');\n    setJobId(jobId);\n  };\n\n  const handleResetPage = () => {\n    setPage('home');\n  };\n\n  const handleLoadMore = () => {\n    loadJobs({ ...selection,\n      page: pageNumber + 1\n    });\n    setPageNumber(pageNumber + 1);\n  };\n\n  let jobDetails = {};\n\n  if (page === 'details') {\n    jobDetails = results.find(job => job.id === jobId);\n  }\n\n  const value = {\n    results,\n    details: jobDetails,\n    onSearch: handleSearch,\n    onItemClick: handleItemClick,\n    onResetPage: handleResetPage\n  };\n  return /*#__PURE__*/React.createElement(JobsContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Loader, {\n    show: isLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, \"Loading...\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${page === 'details' && 'hide'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Search, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }), !_.isEmpty(errors) && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"errorMsg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, errors.error)), /*#__PURE__*/React.createElement(Results, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }), results.length > 0 && _.isEmpty(errors) && !hideLoadMore && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"load-more\",\n    onClick: isLoading ? null : handleLoadMore,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    disabled: isLoading,\n    className: `${isLoading ? 'disabled' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, \"Load More Jobs\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: `${page === 'home' && 'hide'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, page === 'details' && /*#__PURE__*/React.createElement(JobDetails, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 32\n    }\n  })));\n};\n\nHomePage.propTypes = {\n  jobs: PropTypes.array.isRequired,\n  errors: PropTypes.object\n};\n\nconst mapStateToProps = state => ({\n  jobs: state.jobs,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps)(HomePage);","map":{"version":3,"sources":["D:/raect_job_apply/src/components/HomePage.js"],"names":["React","useState","useEffect","_","PropTypes","connect","initiateGetJobs","resetErrors","Header","Search","Results","JobDetails","JobsContext","Loader","HomePage","props","results","setResults","errors","setErrors","isLoading","setIsLoading","jobId","setJobId","page","setPage","pageNumber","setPageNumber","selection","setSelection","hideLoadMore","setHideLoadMore","jobs","loadJobs","dispatch","description","location","full_time","isLoadMore","hasOwnProperty","then","response","length","catch","handleSearch","handleItemClick","handleResetPage","handleLoadMore","jobDetails","find","job","id","value","details","onSearch","onItemClick","onResetPage","isEmpty","error","propTypes","array","isRequired","object","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { initiateGetJobs } from '../actions/jobs';\nimport { resetErrors } from '../actions/errors';\nimport Header from './Header';\nimport Search from './Search';\nimport Results from './Results';\nimport JobDetails from './JobDetails';\nimport JobsContext from '../context/jobs';\nimport Loader from './Loader';\n\nconst HomePage = (props) => {\n  const [results, setResults] = useState([]);\n  const [errors, setErrors] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [jobId, setJobId] = useState(-1);\n  const [page, setPage] = useState('home');\n  const [pageNumber, setPageNumber] = useState(1);\n  const [selection, setSelection] = useState(null);\n  const [hideLoadMore, setHideLoadMore] = useState(false);\n\n  useEffect(() => {\n    setResults(props.jobs);\n  }, [props.jobs]);\n\n  useEffect(() => {\n    setErrors(props.errors);\n  }, [props.errors]);\n\n  const loadJobs = (selection) => {\n    const { dispatch } = props;\n    const { description, location, full_time, page = 1 } = selection;\n    let isLoadMore = false;\n    if (selection.hasOwnProperty('page')) {\n      isLoadMore = true;\n    }\n    dispatch(resetErrors());\n    setIsLoading(true);\n    dispatch(\n      initiateGetJobs({ description, location, full_time, page }, isLoadMore)\n    )\n      .then((response) => {\n        if (response && response.jobs.length === 0) {\n          setHideLoadMore(true);\n        } else {\n          setHideLoadMore(false);\n        }\n        setIsLoading(false);\n      })\n      .catch(() => setIsLoading(false));\n  };\n\n  const handleSearch = (selection) => {\n    loadJobs(selection);\n    setSelection(selection);\n  };\n\n  const handleItemClick = (jobId) => {\n    setPage('details');\n    setJobId(jobId);\n  };\n\n  const handleResetPage = () => {\n    setPage('home');\n  };\n\n  const handleLoadMore = () => {\n    loadJobs({ ...selection, page: pageNumber + 1 });\n    setPageNumber(pageNumber + 1);\n  };\n\n  let jobDetails = {};\n  if (page === 'details') {\n    jobDetails = results.find((job) => job.id === jobId);\n  }\n\n  const value = {\n    results,\n    details: jobDetails,\n    onSearch: handleSearch,\n    onItemClick: handleItemClick,\n    onResetPage: handleResetPage\n  };\n\n  return (\n    <JobsContext.Provider value={value}>\n      <Loader show={isLoading}>Loading...</Loader>\n      <div className={`${page === 'details' && 'hide'}`}>\n        <Header />\n        <Search />\n        {!_.isEmpty(errors) && (\n          <div className=\"errorMsg\">\n            <p>{errors.error}</p>\n          </div>\n        )}\n        <Results />\n        {results.length > 0 && _.isEmpty(errors) && !hideLoadMore && (\n          <div\n            className=\"load-more\"\n            onClick={isLoading ? null : handleLoadMore}\n          >\n            <button\n              disabled={isLoading}\n              className={`${isLoading ? 'disabled' : ''}`}\n            >\n              Load More Jobs\n            </button>\n          </div>\n        )}\n      </div>\n      <div className={`${page === 'home' && 'hide'}`}>\n        {page === 'details' && <JobDetails />}\n      </div>\n    </JobsContext.Provider>\n  );\n};\n\nHomePage.propTypes = {\n  jobs: PropTypes.array.isRequired,\n  errors: PropTypes.object\n};\n\nconst mapStateToProps = (state) => ({\n  jobs: state.jobs,\n  errors: state.errors\n});\n\nexport default connect(mapStateToProps)(HomePage);\n"]},"metadata":{},"sourceType":"module"}